# ğŸ® åŸºäº YOLOv10 å¾®ä¿¡è·³ä¸€è·³ AMD ROCm ç‰ˆæœ¬

<div align='center'>

[![AMD](https://img.shields.io/badge/AMD-ROCm-ED1C24)](https://rocm.docs.amd.com/)

</div>

**å¾®ä¿¡è·³ä¸€è·³è‡ªåŠ¨åŒ–**æ˜¯åŸºäºYOLOv10ç›®æ ‡æ£€æµ‹çš„å¾®ä¿¡è·³ä¸€è·³æ¸¸æˆè‡ªåŠ¨åŒ–å·¥å…·ï¼Œé€šè¿‡è®¡ç®—æœºè§†è§‰è¯†åˆ«æ¸¸æˆä¸­çš„å°äººå’Œç›®æ ‡å¹³å°ï¼Œè‡ªåŠ¨è®¡ç®—è·ç¦»å¹¶æ§åˆ¶æ‰‹æœºè¿›è¡Œç²¾å‡†è·³è·ƒã€‚æœ¬é¡¹ç›®å·²æ”¯æŒ AMD ROCm å¹³å°è®­ç»ƒå’Œæ¨ç†ï¼Œæ”¯æŒ Ryzen AI ç³»åˆ—èŠ¯ç‰‡ã€‚

> å¾®ä¿¡è·³ä¸€è·³é¡¹ç›®åœ°å€ï¼š[*Link*](https://github.com/KMnO4-zx/wechat-jump.git)

***OKï¼Œé‚£æ¥ä¸‹æ¥æˆ‘å°†ä¼šå¸¦é¢†å¤§å®¶äº²è‡ªåŠ¨æ‰‹ï¼Œä¸€æ­¥æ­¥å®ç°å¾®ä¿¡è·³ä¸€è·³è‡ªåŠ¨åŒ–çš„è®­ç»ƒå’Œä½¿ç”¨è¿‡ç¨‹ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¥ä½“éªŒä¸€ä¸‹å§~***

## Step 1: ç¯å¢ƒå‡†å¤‡

æœ¬æ–‡åŸºç¡€ç¯å¢ƒå¦‚ä¸‹ï¼š

```
----------------
windows 22.04
python 3.12
rocm 7.2.0
pytorch 2.9.1
----------------
```

é¦–å…ˆ `pip` æ¢æºåŠ é€Ÿä¸‹è½½å¹¶å®‰è£…ä¾èµ–åŒ…

```shell
# å‡çº§pip
python -m pip install --upgrade pip

# å®‰è£…ROCmç›¸å…³ä¾èµ– åŒ…å« torch torchvision torchaudioç­‰æ ¸å¿ƒåº“
# ä»¥ Ryzen AI ç³»åˆ—ä¸ºä¾‹ 
python -m pip install --no-cache-dir "https://repo.radeon.com/rocm/windows/.rocm-rel-7.2_a/rocm_sdk_core-7.2.0.dev0-py3-none-win_amd64.whl"
python -m pip install --no-cache-dir "https://repo.radeon.com/rocm/windows/.rocm-rel-7.2_a/rocm_sdk_devel-7.2.0.dev0-py3-none-win_amd64.whl"
python -m pip install --no-cache-dir "https://repo.radeon.com/rocm/windows/.rocm-rel-7.2_a/rocm_sdk_libraries_custom-7.2.0.dev0-py3-none-win_amd64.whl"
python -m pip install --no-cache-dir "https://repo.radeon.com/rocm/windows/.rocm-rel-7.2_a/rocm-7.2.0.dev0.tar.gz"
python -m pip install --no-cache-dir "https://repo.radeon.com/rocm/windows/.rocm-rel-7.2_a/torch-2.9.1+rocmsdk20260116-cp312-cp312-win_amd64.whl"
python -m pip install --no-cache-dir "https://repo.radeon.com/rocm/windows/.rocm-rel-7.2_a/torchvision-0.24.1+rocmsdk20260116-cp312-cp312-win_amd64.whl"
python -m pip install --no-cache-dir "https://repo.radeon.com/rocm/windows/.rocm-rel-7.2_a/torchaudio-2.9.0+rocmsdk20251116-cp312-cp312-win_amd64.whl"

# æ›´æ¢ pypi æºåŠ é€Ÿåº“çš„å®‰è£…
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple

# å®‰è£…å…¶ä»–ä¾èµ–
pip install -r requirements_rocm_windows.txt
```

> æœ¬é¡¹ç›®ä½¿ç”¨ Ryzen AI MAX 395/370 è¿è¡Œæµ‹è¯•ï¼Œå…¶ä»– Radeon ç³»åˆ—é€‚é…æƒ…å†µè¯·å‚è€ƒ [æ”¯æŒåˆ—è¡¨](https://rocm.docs.amd.com/projects/radeon-ryzen/en/latest/docs/compatibility/compatibilityryz/windows/windows_compatibility.html)

### å®‰è£… ADB å·¥å…·

ADBï¼ˆAndroid Debug Bridgeï¼‰æ˜¯ç”¨äºä¸Androidè®¾å¤‡é€šä¿¡çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

**Windows å®‰è£…æ–¹å¼ï¼š**

1. å®˜æ–¹ä¸‹è½½ï¼šhttps://developer.android.google.cn/tools/releases/platform-tools?authuser=4&hl=zh-cn
2. ä¸‹è½½å¹¶è§£å‹åï¼Œè®¾ç½®è§£å‹è·¯å¾„è‡³ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­

<div align='center'>
    <img src="./images/env.png" alt="ç¯å¢ƒå˜é‡é…ç½®" width="90%">
    <p>ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹</p>
</div>

**macOS å®‰è£…æ–¹å¼ï¼š**

```bash
# ä½¿ç”¨æä¾›çš„å®‰è£…è„šæœ¬
chmod +x install_adb_mac.sh
./install_adb_mac.sh

# æˆ–æ‰‹åŠ¨å®‰è£…
brew install android-platform-tools
```

### å®‰å“æ‰‹æœºè®¾ç½®

1. å¼€å¯å¼€å‘è€…é€‰é¡¹
2. å¯ç”¨USBè°ƒè¯•
3. è¿æ¥ç”µè„‘å¹¶æˆæƒADBè°ƒè¯•
4. éªŒè¯è¿æ¥ï¼š`adb devices`

## Step 2: æ•°æ®å‡†å¤‡

### 2.1 è‡ªåŠ¨æˆªå›¾æ”¶é›†æ•°æ®

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ”¶é›†æ¸¸æˆæˆªå›¾ä½œä¸ºè®­ç»ƒæ•°æ®ã€‚è¿è¡Œè‡ªåŠ¨æˆªå›¾è„šæœ¬ï¼š

```shell
# è‡ªåŠ¨æˆªå›¾æ”¶é›†è®­ç»ƒæ•°æ®
python simple_screenshot.py
```

è„šæœ¬ä¼šæ¯2ç§’è‡ªåŠ¨æˆªå›¾ä¸€æ¬¡ï¼Œä¿å­˜åˆ° `dataset/screenshot_dataset/` ç›®å½•ã€‚æŒ‰ `Ctrl+C` åœæ­¢æˆªå›¾ã€‚

> å»ºè®®æ”¶é›†è‡³å°‘ 200-500 å¼ ä¸åŒåœºæ™¯çš„æ¸¸æˆæˆªå›¾ï¼ŒåŒ…æ‹¬ï¼š
> - ä¸åŒè·ç¦»çš„è·³è·ƒåœºæ™¯
> - ä¸åŒå½¢çŠ¶çš„å¹³å°
> - ä¸åŒè§’åº¦å’Œå…‰ç…§æ¡ä»¶

### 2.2 æ•°æ®æ ‡æ³¨

ä½¿ç”¨ `labelimg` å·¥å…·å¯¹æˆªå›¾è¿›è¡Œæ ‡æ³¨ï¼š

```shell
# å¯åŠ¨æ ‡æ³¨å·¥å…·
labelimg
```

æ ‡æ³¨æ­¥éª¤ï¼š

1. æ‰“å¼€ `dataset/screenshot_dataset/` ç›®å½•
2. é€‰æ‹© YOLO æ ¼å¼
3. æ ‡æ³¨ä¸¤ä¸ªç±»åˆ«ï¼š
   - **ç±»åˆ« 0 (cube)**: ç›®æ ‡å¹³å°
   - **ç±»åˆ« 1 (human)**: å°äºº
4. ä¿å­˜æ ‡æ³¨æ–‡ä»¶åˆ° `dataset/yolo_label/` ç›®å½•

æ ‡æ³¨å®Œæˆåï¼Œæ¯ä¸ªå›¾ç‰‡ä¼šå¯¹åº”ä¸€ä¸ªåŒåçš„ `.txt` æ ‡æ³¨æ–‡ä»¶ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```text
0 0.5 0.3 0.1 0.15  # ç±»åˆ« x_center y_center width height (å½’ä¸€åŒ–åæ ‡)
1 0.2 0.7 0.05 0.1
```

### 2.3 æ•°æ®é›†åˆ’åˆ†

ä½¿ç”¨ `dataset_split.py` è„šæœ¬å°†æ•°æ®é›†åˆ’åˆ†ä¸ºè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†ï¼š

```shell
# åˆ’åˆ†æ•°æ®é›†ï¼ˆé»˜è®¤æ¯”ä¾‹ï¼šè®­ç»ƒé›†80%ï¼ŒéªŒè¯é›†10%ï¼Œæµ‹è¯•é›†10%ï¼‰
python dataset_split.py
```

è„šæœ¬ä¼šè‡ªåŠ¨å°†æ•°æ®åˆ’åˆ†åˆ° `yolo_dataset/` ç›®å½•ä¸‹ï¼š

```
yolo_dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/    # è®­ç»ƒé›†å›¾ç‰‡
â”‚   â”œâ”€â”€ val/      # éªŒè¯é›†å›¾ç‰‡
â”‚   â””â”€â”€ test/     # æµ‹è¯•é›†å›¾ç‰‡
â””â”€â”€ labels/
    â”œâ”€â”€ train/    # è®­ç»ƒé›†æ ‡ç­¾
    â”œâ”€â”€ val/      # éªŒè¯é›†æ ‡ç­¾
    â””â”€â”€ test/     # æµ‹è¯•é›†æ ‡ç­¾
```

## Step 3: æ¨¡å‹è®­ç»ƒ

### 3.1 å‡†å¤‡æ•°æ®é›†é…ç½®æ–‡ä»¶

åœ¨ `yolo_dataset/` ç›®å½•ä¸‹åˆ›å»º `data.yaml` æ–‡ä»¶ï¼š

```yaml
path: ./yolo_dataset
train: images/train
val: images/val
test: images/test

names:
  0: cube
  1: human
```

### 3.2 å¼€å§‹è®­ç»ƒ

è¿è¡Œè®­ç»ƒè„šæœ¬ï¼š

```shell
python train.py
```

è®­ç»ƒè„šæœ¬ä¼šï¼š

1. åŠ è½½é¢„è®­ç»ƒçš„ YOLOv10n æ¨¡å‹
2. ä½¿ç”¨ ROCm åŠ é€Ÿè®­ç»ƒï¼ˆè‡ªåŠ¨ä½¿ç”¨ `cuda` è®¾å¤‡ï¼‰
3. è®­ç»ƒ 500 ä¸ª epoch
4. ä¿å­˜æœ€ä½³æ¨¡å‹åˆ° `runs/detect/train/weights/best.pt`

è®­ç»ƒå‚æ•°è¯´æ˜ï¼š

- **æ¨¡å‹**: YOLOv10nï¼ˆè½»é‡çº§æ¨¡å‹ï¼Œé€‚åˆç§»åŠ¨ç«¯å’Œè¾¹ç¼˜è®¾å¤‡ï¼‰
- **è¾“å…¥å°ºå¯¸**: 640x640
- **è®­ç»ƒè½®æ•°**: 500 epochs
- **è®¾å¤‡**: è‡ªåŠ¨ä½¿ç”¨ ROCm (cuda)

> è®­ç»ƒæ—¶é—´å–å†³äºæ•°æ®é›†å¤§å°å’Œç¡¬ä»¶æ€§èƒ½ï¼Œé€šå¸¸åœ¨ Ryzen AI è®¾å¤‡ä¸Šéœ€è¦ 1-3 å°æ—¶

### 3.3 æ¨¡å‹æµ‹è¯•

è®­ç»ƒå®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨ `detect.py` æµ‹è¯•æ¨¡å‹æ•ˆæœï¼š

```shell
# æµ‹è¯•è®­ç»ƒå¥½çš„æ¨¡å‹
python detect.py
```

## Step 4: ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·

### 4.1 è¿è¡Œä¸»ç¨‹åº

è®­ç»ƒå®Œæˆåï¼Œè¿è¡Œä¸»ç¨‹åºå¼€å§‹è‡ªåŠ¨åŒ–æ¸¸æˆï¼š

```shell
python main.py
```

ä¸»ç¨‹åºä¼šï¼š

1. åŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹ï¼ˆ`./runs/detect/train/weights/best.pt`ï¼‰
2. è‡ªåŠ¨æˆªå›¾è·å–æ¸¸æˆç”»é¢
3. ä½¿ç”¨ YOLO æ¨¡å‹æ£€æµ‹å°äººå’Œç›®æ ‡å¹³å°
4. è®¡ç®—è·ç¦»å¹¶è‡ªåŠ¨è·³è·ƒ
5. å®æ—¶æ˜¾ç¤ºæ£€æµ‹ç»“æœ

### 4.2 å‚æ•°è°ƒæ•´

åœ¨ `main.py` ä¸­å¯ä»¥è°ƒæ•´è·³è·ƒç³»æ•° `k`ï¼š

```python
jump.jump(k=1.3)  # æ ¹æ®æ‰‹æœºåˆ†è¾¨ç‡è°ƒæ•´ç³»æ•°ï¼Œå±å¹•è¶Šå¤§ï¼Œkå€¼è¶Šå¤§
```

ä¸åŒæ‰‹æœºåˆ†è¾¨ç‡çš„ç³»æ•°å‚è€ƒï¼š

- 1080p: `k=1.3`
- 1440p: `k=1.5`
- éœ€è¦æ ¹æ®å®é™…æµ‹è¯•è°ƒæ•´

### 4.3 æ ¸å¿ƒç®—æ³•

**1. ç›®æ ‡æ£€æµ‹**

ä½¿ç”¨ YOLOv10 æ¨¡å‹æ£€æµ‹æ¸¸æˆä¸­çš„ï¼š
- ç›®æ ‡å¹³å°ä½ç½®ï¼ˆç±»åˆ« 0: cubeï¼‰
- å°äººä½ç½®ï¼ˆç±»åˆ« 1: humanï¼‰

**2. è·ç¦»è®¡ç®—**

```python
# è®¡ç®—ä¸¤ä¸ªç›®æ ‡ä¸­å¿ƒç‚¹çš„æ¬§æ°è·ç¦»
distance = np.sqrt((cube_box[0] - humen_box[0]) ** 2 + 
                   (cube_box[1] - (humen_box[1] + humen_box[3] * 0.5)) ** 2)
```

**3. è·³è·ƒæ§åˆ¶**

```python
# æ ¹æ®è·ç¦»è®¡ç®—æŒ‰å‹æ—¶é—´ï¼Œæ¨¡æ‹Ÿè·³è·ƒ
press_time = int(distance * k)  # k ä¸ºè·³è·ƒç³»æ•°
jump.adb_tap(x, y, duration_ms=press_time)
```

## å†™åœ¨æœ€å

*å¾®ä¿¡è·³ä¸€è·³è‡ªåŠ¨åŒ–é¡¹ç›®å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯è§£å†³å®é™…é—®é¢˜ã€‚é€šè¿‡ YOLOv10 ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç²¾å‡†è¯†åˆ«æ¸¸æˆä¸­çš„å…³é”®å…ƒç´ ï¼Œå¹¶é€šè¿‡ ADB å®ç°è‡ªåŠ¨åŒ–æ§åˆ¶ã€‚æœ¬é¡¹ç›®å·²æ”¯æŒ AMD ROCm å¹³å°ï¼Œè®©æ›´å¤šå¼€å‘è€…èƒ½å¤Ÿåœ¨ AMD ç¡¬ä»¶ä¸Šä½“éªŒæ·±åº¦å­¦ä¹ çš„é­…åŠ›ã€‚*

### é¡¹ç›®ç‰¹è‰²

- ğŸ¤– **æ™ºèƒ½è¯†åˆ«**ï¼šä½¿ç”¨YOLOv10æ¨¡å‹ç²¾å‡†è¯†åˆ«æ¸¸æˆä¸­çš„å°äººå’Œç›®æ ‡å¹³å°
- ğŸ“ **è·ç¦»è®¡ç®—**ï¼šé€šè¿‡æ¬§æ°è·ç¦»è®¡ç®—è·³è·ƒæ‰€éœ€çš„åŠ›åº¦
- ğŸ“± **ADBæ§åˆ¶**ï¼šè‡ªåŠ¨æ§åˆ¶Androidæ‰‹æœºè¿›è¡Œæˆªå›¾å’Œæ¨¡æ‹Ÿç‚¹å‡»
- ğŸ¯ **é«˜ç²¾åº¦**ï¼šåŸºäºæ·±åº¦å­¦ä¹ çš„ç›®æ ‡æ£€æµ‹ï¼Œè¯†åˆ«å‡†ç¡®ç‡é«˜
- ğŸ”„ **è‡ªåŠ¨åŒ–**ï¼šä¸€é”®è¿è¡Œï¼Œå…¨ç¨‹è‡ªåŠ¨åŒ–æ“ä½œ

### æ€§èƒ½æŒ‡æ ‡

- ç›®æ ‡æ£€æµ‹å‡†ç¡®ç‡ï¼š>99.5%
- è·³è·ƒæˆåŠŸç‡ï¼š>90%
- å¹³å‡å“åº”æ—¶é—´ï¼š<2.5ç§’

### æ³¨æ„äº‹é¡¹

âš ï¸ **å…è´£å£°æ˜**ï¼šæœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä½¿ç”¨æœ¬å·¥å…·å¯èƒ½è¿åæ¸¸æˆæœåŠ¡æ¡æ¬¾ï¼Œè¯·è‡ªè¡Œæ‰¿æ‹…é£é™©ã€‚

### æ•…éšœæ’é™¤

**1. ADBè¿æ¥å¤±è´¥**

```bash
# é‡å¯ADBæœåŠ¡
adb kill-server
adb start-server
```

**2. æ¨¡å‹æ–‡ä»¶ä¸å­˜åœ¨**

- ç¡®ä¿å·²å®Œæˆæ¨¡å‹è®­ç»ƒ
- æ£€æŸ¥æ¨¡å‹è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆé»˜è®¤ï¼š`./runs/detect/train/weights/best.pt`ï¼‰

**3. æˆªå›¾å¤±è´¥**

- æ£€æŸ¥æ‰‹æœºUSBè°ƒè¯•æ˜¯å¦å¼€å¯
- ç¡®è®¤ADBæƒé™å·²æˆæƒ
- éªŒè¯è¿æ¥ï¼š`adb devices`

**4. è·³è·ƒä¸å‡†ç¡®**

- è°ƒæ•´è·³è·ƒç³»æ•° `k` çš„å€¼
- æ£€æŸ¥æ¨¡å‹æ£€æµ‹æ•ˆæœ
- ç¡®ä¿æ•°æ®é›†è´¨é‡è¶³å¤Ÿå¥½

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªæ˜Ÿæ˜Ÿæ”¯æŒä¸€ä¸‹ï¼
